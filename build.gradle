apply from: '.umstarter.gradle'

// Siehe Kickstarter.md für Beispiele und Erklärungen.

dependencies {
    // http://mavenrepo/#artifact~pinuts-releases/de.pinuts.cmsbs/UM
    runtime('de.pinuts.cmsbs:UM:7.47.0')

    // http://mavenrepo/#artifact~pinuts-releases/de.pinuts.cmsbs/CseConsole
    runtime('de.pinuts.cmsbs:CseConsole:7.32.3')
}

pinuts.projectName = 'MyProject'
pinuts.groupId = 'de.pinuts'
pinuts.um.port = System.getenv('MY_PROJECT_SERVER_PORT') ?: '8080'

startUm.dependsOn << umSchemaUpdate
run.dependsOn << umSchemaUpdate

setup.doLast {
    // ln('cmsbs-conf/cse/plugins/de.pinuts.myapp', pinuts.um.pluginsDir)

    fileTree('cmsbs-conf/conf.d').each {target ->
        ln(target, pinuts.um.confdDir)
    }
    fileTree('env/devel/cmsbs-conf/conf.d').each {target ->
        ln(target, pinuts.um.confdDir)
    }

    // ln('cmsbs-conf/adminRoles', pinuts.um.cmsbsConfDir)
    // ln('cmsbs-conf/entryTypes', pinuts.um.cmsbsConfDir)
}

setup.finalizedBy vscode

